## CCA2 Encryption
This was a group project for CSc 480: Computer Security, but I decided to do it
agian all by myself to practice C programming.

## Things I learned beside the crypto stuff...
* Difference between `array[len]` and `array = malloc(...)`
    * `array[len]` does not utilize the heap which has bigger size than the stack, so it is possible that `len` exceeds the stack's storage space and causes segfault.
    * In general you should use `array[len]` when you are sure `len` is small.
    * It is recommend to explicitly call `free` for `malloc`ed objects when you no longer need them.
* `fopen` vs `open`
    * `fopen` returns a `FILE` pointer while `open` returns a file descriptor.
    * `fopen` is a C library function while `open` is a system call.
    * `open` allows you to specify more strict permission of the file.
    * In this project, I only use `open` when I need to use `mmap` since it requires a file descriptor to work.
* `perror`
    * In the given sample codes, error messages are displayed using `fprintf(stderr, ...)`. I found `perror` more useful since it converts `errno` to their corresponding string representation which makes it easier to debug.


## To run the program
- Simply run `make` to generate the executable. `test.sh` will test the implementation of the **RSA encryption**, **AES encryption**, and the **KEM encryption**. The output can be found in the file `output` generated by the script.

- Basic usage (command line interface)
    * Generate a 2048 bit key, and save to /tmp/testkey{,.pub}:
        * `./kem-enc -b 2048 -g /tmp/testkey`
    * Encrypt `file` with the public key and write ciphertext to `ct`
        * `./kem-enc -e -i file -o ct -k /tmp/testkey`
    * Decrypt `ct` with the private key and write plaintext to `file0`
        * `./kem-dec -d -i ct -o file0 -k /tmp/testkey`

## Disclaimer
1. A big part of the codes and the file structure were given. `aes-example.c` 
inside `example/` demonstrates how to perform 
[AES Encryption](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard) 
with [OpenSSl](https://www.openssl.org/docs/man1.0.2/) in C. The codes I wrote are all labeled "**TODO**".
2. This program might not work in Windows.